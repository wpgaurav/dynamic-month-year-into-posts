(()=>{"use strict";var t={87(t){t.exports=window.wp.element},427(t){t.exports=window.wp.components},573(t){t.exports=window.wp.primitives},715(t){t.exports=window.wp.blockEditor},723(t){t.exports=window.wp.i18n},790(t){t.exports=window.ReactJSXRuntime},997(t){t.exports=window.wp.blocks}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}var o=n(997),a=n(573),r=n(790),s=(0,r.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(a.Path,{d:"M5.5 12h1.75l-2.5 3-2.5-3H4a8 8 0 113.134 6.35l.907-1.194A6.5 6.5 0 105.5 12zm9.53 1.97l-2.28-2.28V8.5a.75.75 0 00-1.5 0V12a.747.747 0 00.218.529l1.282-.84-1.28.842 2.5 2.5a.75.75 0 101.06-1.061z"})}),i=n(723),l=n(715),d=n(427),c=n(87);function p(t,e){if(!t)return 0;const n=new Date(t),o=new Date;o.setHours(0,0,0,0),n.setHours(0,0,0,0);const a="until"===e?Math.floor((n-o)/864e5):Math.floor((o-n)/864e5);return Math.max(0,a)}const u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"dmyip/countdown","version":"1.7.1","title":"Live Countdown","category":"widgets","icon":"clock","description":"Display a live countdown that updates automatically.","keywords":["countdown","days","timer","until","since"],"textdomain":"dynamic-month-year-into-posts","attributes":{"mode":{"type":"string","default":"until"},"targetDate":{"type":"string","default":""},"label":{"type":"string","default":"days"},"showLabel":{"type":"boolean","default":true}},"supports":{"html":false,"align":["left","center","right"],"interactivity":true,"typography":{"fontSize":true,"lineHeight":true},"color":{"text":true,"background":true},"spacing":{"margin":true,"padding":true}},"editorScript":"file:./index.js","viewScriptModule":"file:./view.js","render":"file:./render.php"}');(0,o.registerBlockType)(u.name,{...u,icon:s,edit:function({attributes:t,setAttributes:e}){const{mode:n,targetDate:o,label:a,showLabel:s}=t,u=(0,l.useBlockProps)(),[h,m]=(0,c.useState)(p(o,n));(0,c.useEffect)(()=>{m(p(o,n))},[o,n]),(0,c.useEffect)(()=>{const t=setInterval(()=>{m(p(o,n))},6e4);return()=>clearInterval(t)},[o,n]);const y=s?`${h} ${a}`:String(h);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.InspectorControls,{children:[(0,r.jsxs)(d.PanelBody,{title:(0,i.__)("Countdown Settings","dynamic-month-year-into-posts"),children:[(0,r.jsx)(d.SelectControl,{label:(0,i.__)("Mode","dynamic-month-year-into-posts"),value:n,options:[{value:"until",label:(0,i.__)("Days Until","dynamic-month-year-into-posts")},{value:"since",label:(0,i.__)("Days Since","dynamic-month-year-into-posts")}],onChange:t=>e({mode:t})}),(0,r.jsx)(d.TextControl,{label:(0,i.__)("Target Date","dynamic-month-year-into-posts"),value:o,onChange:t=>e({targetDate:t}),placeholder:"YYYY-MM-DD",type:"date",help:(0,i.__)("Select or enter the target date.","dynamic-month-year-into-posts")}),(0,r.jsx)(d.ToggleControl,{label:(0,i.__)("Show Label","dynamic-month-year-into-posts"),checked:s,onChange:t=>e({showLabel:t})}),s&&(0,r.jsx)(d.TextControl,{label:(0,i.__)("Label Text","dynamic-month-year-into-posts"),value:a,onChange:t=>e({label:t}),placeholder:"days"})]}),(0,r.jsxs)(d.PanelBody,{title:(0,i.__)("Preview","dynamic-month-year-into-posts"),initialOpen:!1,children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:(0,i.__)("Current countdown:","dynamic-month-year-into-posts")})}),(0,r.jsx)("p",{style:{fontSize:"2em",fontWeight:"bold"},children:y}),(0,r.jsx)("p",{style:{fontSize:"0.85em",color:"#757575"},children:(0,i.__)("This countdown will update live on the frontend.","dynamic-month-year-into-posts")})]})]}),(0,r.jsx)("span",{...u,children:o?y:(0,i.__)("Set a target date","dynamic-month-year-into-posts")})]})},save:()=>null})})();